---
title: '專案回顧-小寶成長日記'
date: '2023-05-28'
---

&nbsp;

小寶出生後大概有一個半月沒寫文章了，這陣子嚴重的睡眠不足和手忙腳亂讓我沒辦法如當初所想的：每周要產出兩篇文章。
現在這個情況還是沒變，只是我嘗試提高我的生產力，比如小寶睡覺的時候就馬上來工作不要滑手機(其實滑的是自由？)，也因為習慣 3 個小時為單位的睡眠，覺得可以把該做的事情做完再補眠。

而這段時間雖然蠻痛苦的，我還是把「小寶成長日記」完成了，也因為有小寶才有這個專案。

&nbsp;
&nbsp;

## 專案簡介

https://github.com/Joshhong30s/06baby

- 前端框架 Next.js + TypeScript
- 後端 Express & Restful API + MongoDB 資料庫儲存使用者和相簿貼文資料
- 成長圖表板和留言板直接使用 Next.js 的 API 接 GoogleAPI，因為小寶每天的成長數據我是用 GoogleSheet 紀錄整理的
- 前端部署在 Vercel，後端部署在 Render

&nbsp;
&nbsp;

## 專案規劃與演進

小寶出生後醫院月中都是完全禁止訪客的，只能用 Line 傳照片和影片給家人們，所以就做一個給家人們特別是長輩看孫子，前前後後做了大概 1 個月，是一個先求有在求好、持續優化、想到要做什麼就去找元件來做的過程，功能的演進是這樣的：

1. 一開始只做註冊、登入、上傳照片和首頁相簿卡功能，用來每天上傳一張照片給爺爺奶奶看。
2. 用 Imgur API 上傳和存放圖片
3. 需要播放 Youtube 影片所以用了 react-player 這個播放器元件
4. 加入我的最愛功能
5. 加入動態留言板功能，左邊留言右邊可以馬上顯示
6. 規劃成長圖表功能，這邊學到了很多組件：recharts, react table, react-select, react-day-picker 以及超級方便的 Googleapis
7. 出月中後把攝影師拍的照片用 react-easy-swipe 放在首頁上做成相簿集

&nbsp;
&nbsp;

## 遇到那些問題？

- CORS：因前後端分開部署導致，查了很多資料最後在後端加入 CORS header 解決
- 圖片上傳：一開始用 Multer 上傳圖片但發現 Vercel/Render 不提供圖片存取，無法顯示在網站上，改用 Imgur API 解決
- 我的最愛：必須要在後端 DataSchema 設定和 User 相關聯才能作用
- 成長圖表：如何抓取 GoogleSheet 資料、如何重新賦予資料格式、如何顯示最後一次輸入的資料(體重、身長)、如何顯示最後一筆資料、如何讓資料根據選取的日期變動、表格的排列/篩選/翻頁、Rechart 圖表資料與顯示..等
- 美工排版：經歷無數次排版和配色的優化
- 效能體驗：SSR 和 CSR 的選擇，最後認為有 user 互動的圖表還並不適合使用 SSR
- 用戶體驗：navbar 只能用中文大字，這樣爺爺奶奶才看得懂

花最多時間的應該是在 dashboard，因為要處理 api/資料介接/輸出表格與圖表等問題，真的不容易。

&nbsp;
&nbsp;

## 專案心得

1. Next.js 在 Router 和 API 串接上比 React 更方便，開發時可以當作 React 在寫，許多組件(如 Next/Image)效能優化更好
2. CORS 很麻煩，輕量的專案用 Next.js API 可以避免。而 GoogleSheet 雖然當作資料庫很方便但 Loading 時間太長
3. SSR 不一定好，如果有需要和使用者互動還是要等待使用者的操作才能給到應該給的東西
4. User 是誰很重要，本來有自己認為更漂亮的版面和功能，但是考慮到老人家全部捨棄

最後我想作為一個自學獨立開發者最大的問題是：難以收到反饋，我不知道自己的網站效能是否足夠、不知道自己的 code 是否乾淨、甚至不知道自己在面對問題時的解法是否正確或有更佳解。我想必須去尋找開發者社群並加入他們的互動，對我在技術和專案上的優化會有幫助。
